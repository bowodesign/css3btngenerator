!function(){var a={"var":{$btn:$("#result_btn"),cur_data:{},"default":{"btn-text":"Loft Blog","font-size":20,"font-family":"Arial, Helvetica, sans-serif",color:"#ffffff",padding:"10px 20px",background:"#AC9E91","border-radius":8,"border-width":4,"border-color":"#000000","border-style":"solid",shadow:{show:!1,color:"#000000",posx:0,posy:0,blur:0},"__btn-class":"css3-button"},$btn_text:$("#option-btn-text"),$btn_text_color:$("#option-text-color"),$font_size:$("#option-font-size"),$font_family:$("#option-font-family"),$text_shadow_onoff:$("#option-shadow-onoff"),$text_shadow:$(".option-text-shadow-adv"),$text_shadow_color:$("#option-shadow-color"),$border_radius:$("#option-border-radius"),$border_radius_adv:$(".option-border-radius-adv"),$border_size:$("#option-border-size"),$border_color:$("#option-border-color"),$border_style:$("#option-border-style"),$background_color:$(".option-background-color"),$background_type:$("#type-background"),$input_email:$("#email"),$submit:$("#submit")},init:function(){a.var.cur_data=a.var.default,a.var.$border_radius.slider({range:"min",min:0,max:50,step:1,value:a.var.default["border-radius"]}),$("#value-option-border-radius").text(a.var.default["border-radius"]+"px"),a.var.$border_size.slider({range:"min",min:0,max:40,step:1,value:a.var.default["border-width"]}),$("#value-option-border-size").text(a.var.default["border-width"]+"px"),a.var.$font_size.slider({range:"min",min:6,max:60,step:1,value:a.var.default["font-size"]}),$("#value-option-font-size").text(a.var.default["font-size"]+"px"),a.var.$text_shadow.slider({range:"min",min:-10,max:10,step:1}),$(".option-slide-adv").slider({range:"min"}),a.colorpicker(),a.get_html(),a.get_css(),a.var.$btn.css(a.var.default),a.events()},events:function(){a.var.$border_radius.on("slide",a.option_border_radius),a.var.$border_size.on("slide",a.option_border_width),a.var.$border_style.on("change",a.option_border_style),a.var.$border_color.on("change",a.option_border_color),a.var.$border_radius_adv.on("slide",a.option_border_radius_adv),$(".change-advanced").on("click",a.advanced_mode),a.var.$font_size.on("slide",a.option_font_size),a.var.$font_family.on("change",a.option_font_family),a.var.$btn_text.on("keyup",a.option_set_text),a.var.$btn_text_color.on("change",a.option_text_color),a.var.$text_shadow.on("slide",a.option_text_shadow),a.var.$text_shadow_onoff.on("change",a.option_text_shadow_onoff),a.var.$text_shadow_color.on("change",a.option_text_shadow_color),a.var.$background_color.on("change",a.option_backgound_color),a.var.$background_type.on("change",a.option_backgound_type),a.var.$submit.on("click",a.send_email)},colorpicker:function(){$(".preview-color").each(function(){var o=$(this),r=o.data("value"),t=r in a.var.default?a.var.default[r]:"#000000";o.ColorPicker({color:t,onChange:function(a,r){o.css("background-color","#"+r),o.next("input:hidden").val("#"+r).change()}}).css("background",t),o.next("input:hidden").val(t)})},option_border_radius:function(o,r){var t=r.value;$("#value-option-border-radius").text(t+"px");var e={"border-radius":t+"px"};a.var.cur_data["border-radius"]=t,a.var.$btn.css(e),a.get_css()},option_border_radius_adv:function(o,r){var t=a.var.$border_radius_adv;if("on"===o){var e=$.isPlainObject(a.var.cur_data["border-radius"])?0:a.var.cur_data["border-radius"];return t.each(function(){$(this).slider({min:0,max:50,step:1,value:a.var.cur_data["border-radius"]});var o=$(this).data("name");$(".value[data-name="+o+"]").text(e+"px")}),!1}if("off"===o)return a.var.cur_data["border-radius"]=parseInt($("#value-option-border-radius").text()),a.var.$btn.css({"border-radius":a.var.cur_data["border-radius"]}),!1;var n={topleft:t.filter("[data-name=topleft]").slider("value"),topright:t.filter("[data-name=topright]").slider("value"),botright:t.filter("[data-name=botright]").slider("value"),botleft:t.filter("[data-name=botleft]").slider("value")},d=$(o.target).data("name");n[d]=r.value,a.var.cur_data["border-radius"]=n;var i={"border-radius":""};for(name in n)i["border-radius"]+=" "+n[name]+"px",$(".value[data-name="+name+"]").text(n[name]+"px");a.var.$btn.css(i),a.var.$btn.css(i),a.get_css()},option_border_width:function(o,r){var t=r.value;$("#value-option-border-size").text(t+"px");var e={"border-width":t+"px"};a.var.cur_data["border-width"]=t,a.var.$btn.css(e),a.get_css()},option_border_style:function(){var o=$(this).val(),r={"border-style":o};a.var.cur_data["border-style"]=o,a.var.$btn.css(r),a.get_css()},option_border_color:function(){var o=$(this).val(),r={"border-color":o};a.var.cur_data["border-color"]=o,a.var.$btn.css(r),a.get_css()},option_set_text:function(){a.var.cur_data["btn-text"]=$(this).val(),a.get_html()},option_text_color:function(){var o=$(this).val(),r={color:o};a.var.cur_data.color=o,a.var.$btn.css(r),a.get_css()},option_font_size:function(o,r){var t=r.value;$("#value-option-font-size").text(t+"px");var e={"font-size":t+"px"};a.var.cur_data["font-size"]=t,a.var.$btn.css(e),a.get_css()},option_font_family:function(){var o=$(this).val(),r={"font-family":o};a.var.cur_data["font-family"]=o,a.var.$btn.css(r),a.get_css()},option_text_shadow_onoff:function(){var o=$(this).prop("checked"),r=$(this).closest(".wrapoption");a.var.cur_data.shadow.show=o,a.get_css(),o?r.find(".myhide").slideDown("fast"):(a.var.$btn.css("text-shadow","none"),r.find(".myhide").slideUp("fast"))},option_text_shadow:function(o,r){var t=a.var.$text_shadow,e={posx:t.filter("[data-name=posx]").slider("value"),posy:t.filter("[data-name=posy]").slider("value"),blur:t.filter("[data-name=blur]").slider("value")};if(o!==!1){var n=$(o.target).data("name");e[n]=r.value}var d={"text-shadow":""};for(name in e)d["text-shadow"]+=e[name]+"px ",$(".value[data-name="+name+"]").text(e[name]+"px"),a.var.cur_data.shadow[name]=e[name];a.var.cur_data.shadow.color=a.var.$text_shadow_color.val(),d["text-shadow"]+=a.var.cur_data.shadow.color,a.var.$btn.css(d),a.var.$btn.css(d),a.get_css()},option_text_shadow_color:function(){a.option_text_shadow(!1)},option_backgound_color:function(){var o=$(this).val(),r=$(this).data("type");if("color"==r){var t={background:o};a.var.cur_data.background=o}else{var e=a.var.$background_color.filter("[data-type=color-start]").val(),n=a.var.$background_color.filter("[data-type=color-end]").val(),t={background:"linear-gradient("+e+", "+n+")"};a.var.cur_data.background={start:e,end:n}}a.var.$btn.css(t),a.get_css()},option_backgound_type:function(){var o=$(this).val(),r=$(this).closest(".panel-body");r.find("[data-type]").hide().filter("[data-type="+o+"]").show(),a.var.cur_data.background="color"==o?a.var.cur_data.background.start:{start:a.var.cur_data.background,end:a.var.cur_data.background},a.get_css()},advanced_mode:function(){var o=$(this).data("show"),r=$(this).data("hide"),t=$("[data-obj="+r+"]");t.slideUp("fast"),$("[data-obj="+o+"]").slideDown("fast");var e=$(this).data("fun");if(e in a){var n="";$(this).hasClass("show-on")?(n="on",$(this).parent().find(".show-off").show(),$(this).hide()):(n="off",$(this).parent().find(".show-on").show(),$(this).hide()),a[e](n)}},get_html:function(){var o=a.var.cur_data["btn-text"];a.var.$btn.text(o),$("#code-html").text('<button class="'+a.var.cur_data["__btn-class"]+'">'+o+"</button>"),Prism.highlightAll()},get_css:function(){var a=this.var.cur_data,o="."+a["__btn-class"]+"{\n";a["border-width"]>0&&(o+="	border: "+a["border-style"]+" "+a["border-width"]+"px "+a["border-color"]+";\n"),!$.isPlainObject(a["border-radius"])&&a["border-radius"]>0?o+="	border-radius: "+a["border-radius"]+"px;\n":$.isPlainObject(a["border-radius"])&&(o+="	border-radius: "+a["border-radius"].topleft+"px ",o+=a["border-radius"].topright+"px ",o+=a["border-radius"].botleft+"px ",o+=a["border-radius"].botright+"px;\n"),o+="	color: "+a.color+";\n",o+="	font-size: "+a["font-size"]+"px;\n",o+="	font-family: "+a["font-family"]+";\n",a.shadow.show===!0&&(o+="	text-shadow: "+a.shadow.posx+"px "+a.shadow.posy+"px "+a.shadow.blur+"px "+a.shadow.color+";\n"),$.isPlainObject(a.background)?$.isPlainObject(a.background)&&(o+="	background: -moz-linear-gradient("+a.background.start+","+a.background.end+");\n",o+="	background: -ms-linear-gradient("+a.background.start+","+a.background.end+");\n",o+="	background: -o-linear-gradient("+a.background.start+","+a.background.end+");\n",o+="	background: -webkit-linear-gradient("+a.background.start+","+a.background.end+");\n"):o+="	background: "+a.background+";\n",o+="}",$("#code-css").text(o),Prism.highlightAll()},send_email:function(){var o=$.trim(a.var.$input_email.val());if(""==o||-1===o.indexOf("@"))return a.show_msg_after_email({status:"error"}),!1;var r=$("#code-html").text(),t=$("#code-css").text();a.var.$submit.button("loading"),$.ajax({url:"send.php",type:"POST",dataType:"json",data:{email:o,css:t,html:r}}).always(a.show_msg_after_email)},show_msg_after_email:function(o){function r(a){var o=a[Math.round(Math.random()*(a.length-1))];return o}a.var.$submit.button("reset");var t={bad:["Да ты гонишь мне!","Че-то здесь не так...","Не дерзи!","Да ты упертый чтоли?","Да ты упоротый чтоли?","Опять балуешься?","Иди отдохни"],bad_img:[0,-70,-158,-243,-339],good:["Красава","Все чики-пуки","А у нас все пучком"],good_img:[13,-70,-140]},e=$("#msg").show();if("error"==o.status){var n=r(t.bad)+'<div class="msg_error">(не правильный email)</div>',d=r(t.bad_img);e.addClass("error").removeClass("ok"),a.var.$input_email.addClass("error").removeClass("ok"),e.find(".msg_text").html(n),e.find(".msg_img").css("background-position-y",d+"px")}else if("ok"==o.status){var n=r(t.good)+'<div class="msg_ok">(Письмо отправлено)</div>',d=r(t.good_img);e.addClass("ok").removeClass("error"),a.var.$input_email.addClass("ok").removeClass("error"),e.find(".msg_text").html(n),e.find(".msg_img").css("background-position-y",d+"px"),a.var.$input_email.val("")}console.log(o)}};a.init()}(),$(document).ready(function(){$(".change-advanced").tooltip({template:'<div class="tooltip ch-advanced" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>'}),$(".tooltip_r").tooltip(),$acc=$("#accordion"),$acc.on("shown.bs.collapse",function(){$acc.find(".panel-heading").removeClass("active"),$acc.find(".collapse.in").prev(".panel-heading").addClass("active")})});